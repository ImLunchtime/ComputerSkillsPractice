# 添加新练习组件指南

## 概述

本指南说明如何在计算机技能练习系统中添加新的练习组件，确保组件能在生产环境中正确加载。

## 步骤

### 1. 创建组件文件

在 `src/pages/Course/components/challenges/` 目录下创建新的组件文件，按照课程分类。

### 2. 更新组件加载器

在 `src/utils/componentLoader.js` 文件中：

1. 添加新组件的静态导入：
```javascript
import NewChallenge from '@/pages/Course/components/challenges/05-new-course/NewChallenge.vue'
```

2. 在 `componentMap` 中添加新组件的映射：
```javascript
export const componentMap = {
  // ... 现有组件
  'challenges/05-new-course/NewChallenge.vue': NewChallenge,
}
```

### 3. 更新课程数据

在 `server/data/courses.json` 中添加新的课程或挑战：

```json
{
  "id": "new-course",
  "title": "新课程",
  "description": "新课程描述",
  "icon": "🆕",
  "difficulty": "初级",
  "challenges": [
    {
      "id": 10,
      "title": "新挑战",
      "description": "新挑战描述",
      "component": "challenges/05-new-course/NewChallenge.vue"
    }
  ]
}
```

### 4. 重新构建项目

运行以下命令重新构建项目：

```bash
npm run build
npm run start:prod
```

## 重要注意事项

1. **组件路径一致性**：确保 `courses.json` 中的 `component` 字段与 `componentLoader.js` 中的键完全一致。

2. **静态导入**：必须使用静态导入，不能使用动态导入，以确保生产环境兼容性。

3. **文件命名**：组件文件名应该清晰描述其功能，使用 PascalCase 命名法。

4. **目录结构**：保持目录结构的一致性，按课程类型分类组织组件。

## 组件开发规范

### 基本结构

```vue
<template>
  <div class="challenge-container">
    <!-- 挑战内容 -->
  </div>
</template>

<script setup>
// 组件逻辑
</script>

<style scoped>
/* 组件样式 */
</style>
```

### 必需的 Props

每个挑战组件应该接收以下 props：

```javascript
const props = defineProps({
  challenge: {
    type: Object,
    required: true
  }
})
```

### 事件发射

组件应该发射以下事件：

```javascript
const emit = defineEmits(['complete', 'fail'])

// 挑战完成时
emit('complete')

// 挑战失败时
emit('fail')
```

## 测试

添加新组件后，请确保：

1. 在开发环境中测试组件功能
2. 在生产环境中测试组件加载
3. 验证组件的交互逻辑
4. 检查控制台是否有错误信息

## 故障排除

如果组件无法加载，请检查：

1. 组件文件路径是否正确
2. `componentLoader.js` 中的导入和映射是否正确
3. `courses.json` 中的组件路径是否与映射表一致
4. 是否重新构建了项目

通过遵循这个指南，您可以轻松地添加新的练习组件，同时确保系统的稳定性和可维护性。