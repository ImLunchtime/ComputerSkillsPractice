# CentOS 8 Stream Dockeréƒ¨ç½²æŒ‡å—

## ğŸ¯ ç›®æ ‡
åœ¨CentOS 8 StreamæœåŠ¡å™¨ä¸Šä½¿ç”¨Dockeréƒ¨ç½²è®¡ç®—æœºæŠ€èƒ½ç»ƒä¹ ç½‘ç«™ï¼Œæ˜ å°„5173ç«¯å£å¹¶é…ç½®å¼€æœºè‡ªå¯åŠ¨ã€‚

## ğŸ“‹ å‡†å¤‡å·¥ä½œ

### æœåŠ¡å™¨è¦æ±‚
- CentOS 8 Stream
- è‡³å°‘2GBå†…å­˜
- è‡³å°‘10GBå¯ç”¨ç£ç›˜ç©ºé—´
- ç½‘ç»œè¿æ¥æ­£å¸¸

### æœ¬åœ°å‡†å¤‡
ç¡®ä¿é¡¹ç›®æ–‡ä»¶å®Œæ•´ï¼ŒåŒ…æ‹¬ï¼š
- âœ… Dockerfile
- âœ… docker-compose.yml
- âœ… .dockerignore
- âœ… package.jsonï¼ˆå·²æ›´æ–°ï¼‰

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤1ï¼šåœ¨æœåŠ¡å™¨ä¸Šå®‰è£…Docker

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰
# å°† centos-docker-deploy.sh ä¸Šä¼ åˆ°æœåŠ¡å™¨å¹¶æ‰§è¡Œ
chmod +x centos-docker-deploy.sh
./centos-docker-deploy.sh

# æ–¹æ³•2ï¼šæ‰‹åŠ¨å®‰è£…
sudo dnf config-manager --add-repo=https://download.docker.com/linux/centos/docker-ce.repo
sudo dnf install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin
sudo systemctl start docker
sudo systemctl enable docker
```

### æ­¥éª¤2ï¼šä¸Šä¼ é¡¹ç›®ä»£ç 

```bash
# åœ¨æœ¬åœ°æ‰§è¡Œï¼ˆå°†é¡¹ç›®ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼‰
scp -r ./computer-skills-practice user@ä½ çš„æœåŠ¡å™¨IP:/opt/

# æˆ–è€…åœ¨æœåŠ¡å™¨ä¸Šå…‹éš†ä»£ç 
git clone ä½ çš„ä»“åº“åœ°å€ /opt/computer-skills-practice
```

### æ­¥éª¤3ï¼šæ„å»ºå’Œè¿è¡Œå®¹å™¨

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/computer-skills-practice

# æ„å»ºå¹¶å¯åŠ¨å®¹å™¨
sudo docker-compose up -d

# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
sudo docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
sudo docker-compose logs -f
```

### æ­¥éª¤4ï¼šé…ç½®å¼€æœºè‡ªå¯åŠ¨

```bash
# å¯ç”¨systemdæœåŠ¡
sudo systemctl enable computer-skills-practice
sudo systemctl start computer-skills-practice

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status computer-skills-practice
```

## ğŸ”§ é…ç½®è¯´æ˜

### Docker Composeé…ç½®
- **ç«¯å£æ˜ å°„**: 5173:5173
- **æ•°æ®æŒä¹…åŒ–**: ./server/data:/app/server/data
- **é‡å¯ç­–ç•¥**: unless-stopped
- **å¥åº·æ£€æŸ¥**: æ¯30ç§’æ£€æŸ¥ä¸€æ¬¡

### ç¯å¢ƒå˜é‡
- `NODE_ENV=production`
- `npm_config_build_from_source=true`

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
sudo docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
sudo docker-compose logs -f computer-skills-practice

# é‡å¯å®¹å™¨
sudo docker-compose restart

# åœæ­¢å®¹å™¨
sudo docker-compose down

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
sudo docker-compose up -d --build

# è¿›å…¥å®¹å™¨
sudo docker-compose exec computer-skills-practice sh
```

## ğŸ” æ•…éšœæ’é™¤

### æ£€æŸ¥ç«¯å£å ç”¨
```bash
sudo netstat -tlnp | grep 5173
```

### æ£€æŸ¥é˜²ç«å¢™
```bash
# å¼€æ”¾5173ç«¯å£
sudo firewall-cmd --permanent --add-port=5173/tcp
sudo firewall-cmd --reload
```

### æ£€æŸ¥SELinux
```bash
# å¦‚æœé‡åˆ°æƒé™é—®é¢˜ï¼Œå¯èƒ½éœ€è¦é…ç½®SELinux
sudo setsebool -P container_manage_cgroup on
```

### æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
```bash
# æŸ¥çœ‹Dockeræ—¥å¿—
sudo journalctl -u docker

# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
sudo docker-compose logs --tail=100 computer-skills-practice
```

## ğŸŒ è®¿é—®åº”ç”¨

éƒ¨ç½²æˆåŠŸåï¼Œé€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š
- **æœ¬åœ°è®¿é—®**: http://localhost:5173
- **è¿œç¨‹è®¿é—®**: http://ä½ çš„æœåŠ¡å™¨IP:5173

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### å®šæœŸç»´æŠ¤å‘½ä»¤
```bash
# æ¸…ç†æœªä½¿ç”¨çš„é•œåƒ
sudo docker system prune -f

# æ›´æ–°åº”ç”¨
cd /opt/computer-skills-practice
git pull
sudo docker-compose up -d --build

# å¤‡ä»½æ•°æ®
sudo cp -r ./server/data ./backup-$(date +%Y%m%d)
```

### æ€§èƒ½ç›‘æ§
```bash
# æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨
sudo docker stats computer-skills-practice

# æŸ¥çœ‹ç³»ç»Ÿèµ„æº
htop
df -h
```

## âœ… éªŒè¯éƒ¨ç½²

1. **å®¹å™¨è¿è¡Œæ­£å¸¸**: `sudo docker-compose ps` æ˜¾ç¤º "Up"
2. **ç«¯å£ç›‘å¬**: `sudo netstat -tlnp | grep 5173` æœ‰è¾“å‡º
3. **ç½‘é¡µè®¿é—®**: æµè§ˆå™¨èƒ½æ­£å¸¸æ‰“å¼€ç½‘ç«™
4. **å¼€æœºè‡ªå¯**: é‡å¯æœåŠ¡å™¨åå®¹å™¨è‡ªåŠ¨å¯åŠ¨

## ğŸ†˜ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. DockeræœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
2. é˜²ç«å¢™æ˜¯å¦å¼€æ”¾5173ç«¯å£
3. å®¹å™¨æ—¥å¿—æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
4. æœåŠ¡å™¨èµ„æºæ˜¯å¦å……è¶³

---

**éƒ¨ç½²å®Œæˆåï¼Œä½ çš„è®¡ç®—æœºæŠ€èƒ½ç»ƒä¹ ç½‘ç«™å°±å¯ä»¥é€šè¿‡ http://ä½ çš„æœåŠ¡å™¨IP:5173 è®¿é—®äº†ï¼** ğŸ‰